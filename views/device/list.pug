extends ../layout

block main
  section(class="section")
    include navbar
  section(class="section")
    include level
    div(class="container")
      div(class="table-container")
        table(class="table is-fullwidth" id="deviceTable")
          thead
            tr
              th(onclick="sortDeviceTable(0)") 장비 이름 
                i(class="fas fa-sort")
              th(onclick="sortDeviceTable(1)") 대여자 
                i(class="fas fa-sort")
              th(onclick="sortDeviceTable(2)") 대여 시간 
                i(class="fas fa-sort")
              th 대여 여부
              case roleID
                when 1 
                  th 반납 확인
          tbody
            each list in deviceDB
              - let id = list._id
              - let deviceName = list.name
              - let rentalUserName = list.rental[list.__v].rental_user_name
              - let rentalDate = list.rental[list.__v].rental_dt
              tr
                td
                  a(href="/device/"+id)= deviceName
                td= rentalUserName
                case rentalDate
                  when null
                    td
                  default
                    td= format(rentalDate, "yyyy-mm-dd HH:MM")
                case rentalDate
                  when null
                    td
                      button(class="button is-link" id="rentalModalViewButton") 대여 가능
                      include ../rental/rental          
                  default
                    td
                      button(class="button is-warning" disabled) 대여 중
                case roleID
                  when 1
                    td
                      case rentalDate
                        when null 
                          button(class="button" disabled) 반납 확인
                        default
                            button(class="button" id="returnModalViewButton") 반납 확인
                            include ../rental/return
  script(src="/source/javascript/device-table-sort-1.1.js")
